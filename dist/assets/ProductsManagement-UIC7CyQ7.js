import{r as c,j as e}from"./index-PojqqFRY.js";import{I as E}from"./index-Ceixq1Pc.js";import{F as U,a as v,b as I,T as f,c as j,I as T}from"./TableWidgets-25zdHFen.js";function B(){const i=Date.now().toString(36),d=Math.random().toString(36).substring(2);return i+d}function F({handleClose:i,handleSubmit:d,initialData:s,isAddForm:n,existingProducts:k}){const[l,g]=c.useState(s.name||""),[x,p]=c.useState(s.category||""),[m,b]=c.useState(s.price?s.price.toString():""),[y,S]=c.useState(s.stockQuantity?s.stockQuantity.toString():""),[P,C]=c.useState(s.id||"");function N(o){if(o.preventDefault(),l.trim()===""||x.trim()===""||isNaN(parseFloat(m))||isNaN(parseInt(y))||parseFloat(m)<0||parseInt(y)<0){alert("Please fill out all fields correctly.");return}if(n&&k.some(w=>w.id===P.trim())){alert("A product with the same id already exists.");return}d({name:l,category:x,price:parseFloat(m),stockQuantity:parseInt(y),id:n?B():P}),n&&(g(""),p(""),b(""),S(""),C("")),alert(n?"Product Added":"Product Updated")}return e.jsx("div",{className:" bg-stone-300 rounded-lg shadow-lg overflow-auto max-h-[83%] min-h-[83%]",children:e.jsxs("form",{onSubmit:N,className:"max-w-sm mx-auto mt-6 ",children:[e.jsx(U,{type:n?"add":"edit",productName:s.name}),e.jsx(v,{label:"Name",id:"name",value:l,onChange:o=>g(o.target.value),type:"text",maxLength:30}),e.jsx(v,{label:"Category",id:"category",value:x,onChange:o=>p(o.target.value),type:"text",maxLength:30}),e.jsx(v,{label:"Price",id:"price",value:m,onChange:o=>b(o.target.value),type:"text",min:0}),e.jsx(v,{label:"Stock Quantity",id:"stockQuantity",value:y,onChange:o=>S(o.target.value),type:"number",min:0}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(I,{type:"submit",children:n?"Add":"Update"}),e.jsx(I,{type:"button",onClick:i,children:"Cancel"})]})]})})}function D({handleSort:i,productsList:d}){return e.jsx("div",{className:" bg-stone-200 rounded-lg shadow-lg overflow-auto max-h-[83%] min-h-[83%]",children:e.jsxs("table",{className:"table-auto md:table-fixed",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(f,{children:"#"}),e.jsx(f,{handleSort:i,children:"Name"}),e.jsx(f,{handleSort:i,children:"Category"}),e.jsx(f,{handleSort:i,children:"Price"}),e.jsx(f,{handleSort:i,children:"Stock Quantity"}),e.jsx(f,{})]})}),e.jsx("tbody",{children:d})]})})}let h={name:1,category:1,price:1,stockQuantity:1};function R(){const[i,d]=c.useState(""),[s,n]=c.useState(E),[k,l]=c.useState(s),[g,x]=c.useState(!1),[p,m]=c.useState(!1),[b,y]=c.useState(null);function S(t){d(t.target.value);const a=s.filter(r=>r.name.toLowerCase().includes(t.target.value.toLowerCase()));l(a)}function P(t){const a=[...s];switch(t){case"Name":a.sort((r,u)=>h.name*r.name.localeCompare(u.name)),h.name*=-1;break;case"Category":a.sort((r,u)=>h.category*r.category.localeCompare(u.category)),h.category*=-1;break;case"Price":a.sort((r,u)=>h.price*(r.price-u.price)),h.price*=-1;break;default:a.sort((r,u)=>h.stockQuantity*(r.stockQuantity-u.stockQuantity)),h.stockQuantity*=-1;break}n(a),l(a)}function C(){x(!0)}function N(t){d(""),n(a=>[...a,t]),l(a=>[...a,t]),x(!1)}function o(t){y(t),m(!0)}function w(t){d("");const a=s.map(r=>r.id===t.id?t:r);n(a),l(a),m(!1)}function Q(){x(!1),m(!1)}function L(t){if(window.confirm("Are you sure you want to delete this product?")){const r=s.filter(u=>u.id!==t);n(r),l(r)}d("")}const A=k.map((t,a)=>e.jsxs("tr",{children:[e.jsx(j,{children:a+1}),e.jsx(j,{children:t.name}),e.jsx(j,{children:t.category}),e.jsxs(j,{children:["â‚¹",t.price]}),e.jsx(j,{children:t.stockQuantity}),e.jsx(j,{children:e.jsxs("div",{className:"flex justify-evenly",children:[e.jsx(T,{onClick:()=>o(t),type:"edit"}),e.jsx(T,{onClick:()=>L(t.id),type:"delete"})]})})]},t.id));return e.jsxs("div",{className:"h-[90vh] p-2 w-[99vw] m-auto",children:[e.jsxs("div",{className:"p-2 pr-2 flex justify-between",children:[e.jsx("input",{type:"text",placeholder:"Search by product name",value:i,onChange:S,className:"p-2 border border-gray-300 rounded-lg w-10/12",disabled:g||p}),e.jsx("button",{onClick:C,className:"p-2 bg-green-600 text-lg rounded-lg text-stone-50 hover:bg-green-400 hover:text-bold hover:text-white",children:"Add Product"})]}),g&&e.jsx(F,{handleClose:Q,handleSubmit:N,initialData:{name:"",category:"",price:"",stockQuantity:""},existingProducts:s,isAddForm:!0}),p&&e.jsx(F,{handleClose:Q,handleSubmit:w,initialData:b,isAddForm:!1}),!g&&!p&&e.jsx(D,{handleSort:P,productsList:A})]})}export{R as default};
